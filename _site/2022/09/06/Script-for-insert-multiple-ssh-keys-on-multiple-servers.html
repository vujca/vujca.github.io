<html>
    <head>
        <!-- Information about web site -->
        <title>Linux script for inserting SSH keys</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" type="image/png" href="https://tomeksdev.com/design/images/favicon-32x32.png" sizes="32x32" />
        <meta name="author" content="Tomo Novak">
        <meta name="description" content="Develop web, mobile applications with html, css, javascript, nodejs, raspberry... System Administraton(Linux, Windows...), Networking...">
        <meta name="keywords" content="nodejs, javascript, jquery, html, css, tomeksdev, developer, development, developing, raspberry, pi">
        <!-- Facebook Meta -->
        <meta property="og:url" content="https://tomeksdev.com">
        <meta property="og:title" content="TomeksDEV">
        <meta property="og:description" content="Develop web, mobile applications with html, css, javascript, nodejs, raspberry... System Administraton(Linux, Windows...), Networking...">
        <meta property="og:type" content="website">
        <meta property="og:image" content="https://tomeksdev.com/design/images/tomeksdev.png">
        <meta property="og:image:secure_url" content="https://tomeksdev.com/design/images/tomeksdev.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="1200">
        <meta property="og:image:height" content="900">
        <!-- LOADING CSS FILES -->
        <link rel="stylesheet" href="/design/bootstrap/bootstrap.min.css">
        <link rel="stylesheet" href="/design/style.css">
        <link href='https://fonts.googleapis.com/css?family=Raleway:400,100,200,300,500,600,700,800,900' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Lato:400,100,100italic,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/design/font-awesome/css/fontawesome.min.css">
        <link rel="stylesheet" href="/design/font-awesome/css/brands.min.css">
        <link rel="stylesheet" href="/design/font-awesome/css/solid.min.css">
        <!-- LOADING JS FILES -->
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script> -->
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-149612850-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-149612850-1');
        </script>
    </head>
    <body>
        <div class="container-fluid padding">
            <!--Header-->
            <div class="row padding header">
                <!-- Navigation-->
                <nav class="navbar navbar-expand-lg navbar-light shadow-sm" id="mainNav">
                    <div class="container">
                        <div class="navbar-brand fw-bold">
                            <div class="logo-text">
                                <span class="logo-normaltext">Tomeks</span>
                                <span class="logo-smalltext">DEV</span>
                            </div>
                        </div>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                            <i class="fa fa-bars fa-2x" style="color: #ffffff;"></i>
                        </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
    <ul class="navbar-nav ms-auto me-4 my-3 my-lg-0">
        <a class="navlink" href="/"><li class="nav-item">Home</li></a>
        <a class="navlink" href="/downloads"><li class="nav-item">Downloads</li></a>
        <a class="navlink" href="/about"><li class="nav-item">About Me</li></a>
        <a class="navlink" href="/contact"><li class="nav-item">Contact</li></a>
    </ul>
</div>
</div>
</nav>
</div>
<!-- Full Post Here -->
<div class="row padding fullPost">
    <div class="col-lg padding">
        <div class="col-lg padding">
            <div class="row padding">
                <div class="col col-lg-2 gradientLeft"></div>
                <div class="col col-lg-8 homeFullPost">
                    <div class="homeFullPostTitle">Linux script for inserting SSH keys</div>
                    <div class="homeFullPostDate">September  6, 2022 by Vujca</div>
                    <div class="homeFullPostText"><p>For personal use, and all, I’ve created this script to make my job sometimes easy. I have multiple servers and i didnt want to write every time same command for every server, and because of that, i created this script. All my project’s are on my GitHub account and here is link where you can look for this repository: <a href="https://github.com/tomeksdev/ssh-key-server-add">SSH-KEY-SERVER-ADD</a>.</p>

<p><img src="https://tomeksdev.com/new/postImages/ssh_script.svg" alt="Alt" title="Plesk" /></p>

<p>Script that adds multiple SSH keys to multiple servers.</p>

<h2 id="instructions">Instructions</h2>
<p>To download this script, click <a href="https://github.com/tomeksdev/ssh-key-server-add/releases/download/v1.0.0/import-ssh-keys.tar.gz">THIS LINK</a> or follow the commands below.</p>

<p>To download it from the server, if you did not download it from the browser, you must enter the following command.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://github.com/tomeksdev/ssh-key-server-add/releases/download/v1.0.0/import-ssh-keys.tar.gz
</code></pre></div></div>

<p>OR</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/tomeksdev/ssh-key-server-add.git
</code></pre></div></div>

<p>If you downloaded from a browser or with the <code class="language-plaintext highlighter-rouge">wget</code> command, you need to unpack the downloaded file with the following command. If you are working with git, you can skip this step.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -xvf archive.tar.gz
</code></pre></div></div>

<p>Once the file is unzipped or cloned with Git, we only need to do two things to make the script work. First, we need to add an executable right to the <code class="language-plaintext highlighter-rouge">import_ssh.sh</code> file, which we can then run.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod +x import_ssh.sh
</code></pre></div></div>

<p>Secondly, we need to fill or modify the <code class="language-plaintext highlighter-rouge">Server.txt</code> and <code class="language-plaintext highlighter-rouge">Keys.txt</code> configuration files:</p>

<ul>
  <li>server.txt
    <blockquote>
      <p>Add multiple servers with root@ip_address. Each server in a new line.</p>
    </blockquote>
  </li>
  <li>keys.txt
    <blockquote>
      <p>Add or change keys if necessary. Also each ssh key in a new line.</p>
    </blockquote>
  </li>
</ul>

<p>And last but not least run the script:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sh import_ssh.sh
</code></pre></div></div>

<p>OR</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./import_ssh.sh
</code></pre></div></div>

<h2 id="vesrions">Vesrions</h2>

<h4 id="version-v110">version v1.1.0</h4>
<p><a href="https://github.com/tomeksdev/ssh-key-server-add/releases/tag/v1.1.0"><img src="https://img.shields.io/badge/release-v1.1.0-informational" style="width: 100px !important; height: 20px !important;" /></a></p>
<ul>
  <li>The script now checks on each server whether the file authorized_keys exists</li>
  <li>It now checks if the key from the keys.txt file exists in the authorized_keys file, and skips it in this case</li>
  <li>It checks if the file server.txt exists or is empty</li>
  <li>Now the script can be executed without deleting all ssh keys from the servers</li>
  <li>Create nicer echo on the console</li>
</ul>

<h4 id="version-v100">Version v1.0.0</h4>
<p><a href="https://github.com/tomeksdev/ssh-key-server-add/releases/tag/v1.0.0"><img src="https://img.shields.io/badge/release-v1.0.0-informational" style="width: 100px !important; height: 20px !important;" /></a></p>
<ul>
  <li>Add all keys from keys.txt file to all servers reading server.txt files</li>
  <li>Old ssh keys must be deleted on each server to run the script again</li>
  <li>If the keys.txt file does not exist or is empty, the script will not run</li>
</ul>
</div>
                </div>
                <div class="col col-lg-2 gradientRight"></div>
            </div>
        </div>
    </div>
</div>
            <!--Footer-->
            <div class="row padding">
                <div class="col-lg footer padding">
                    <div class="row padding center justify-content-md-center">
                        <div class="col col-lg-8 footer">
                            <p>2020 - 2023 &copy; <a href="">TomeksDEV</a>, by <a href="https://www.facebook.com/vujca">@Vujca</a>.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <script>window.jQuery || document.write('<script src="/js/vendor/jquery.min.js"><\/script>')</script>
        <script src="/js/vendor/popper.min.js"></script>
        <script src="/design/dist/js/bootstrap.min.js"></script>
        <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
        <script src="/js/ie10-viewport-bug-workaround.js"></script>
        <!-- McCaffe Security -->
        <script type="text/javascript" src="https://cdn.ywxi.net/js/1.js" async></script>
    </body>
</html>
